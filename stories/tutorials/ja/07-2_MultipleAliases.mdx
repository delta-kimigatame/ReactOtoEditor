import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Tutorial/ja/07-2.複数エイリアスを設定する" />

# 複数エイリアスを設定する(自動設定の応用)

原音設定は結構大変で、しかも自動解析がうまくいくとは限りません。
そこで、録音するときに一定のリズムに合わせて録音をすれば、原音設定の時に楽にできるというノウハウが生み出されました。

この収録方法は連続音(VCV)やCVVCはもちろん、オンゲントロサバでは単独音もこの方法で収録することを推奨しています。

## この機能を使うための条件

- ✅ **ガイドBGMを使って録音している** - メトロノームやガイドBGMに合わせて録音
- ✅ **ガイドBGMの仕様を理解している** - BPMや録音開始タイミングを把握している

> 💡 **トロサバのチュートリアル**: [Hello, UTAU World!](https://w.atwiki.jp/vbmaker/pages/43.html)では、
> ガイドBGM付きの録音リストが配布されています。初めての方はこれを使うのがおすすめです。

## こんな時に使います

- ✅ **連続音(VCV)の音源を作る** - 例：「a i.wav」に「a あ」「- い」の2つの音
- ✅ **ガイドBGMを使って録音した単独音** - リズムに合わせて録音した場合
- ✅ **1つのwavに複数の音を入れている** - その他の音源形式

## 手順

### 1. 読み込み方法を選ぶ

ダイアログ上部のタブから「**生成**」を選びます。

<div style={{marginTop: '16px', marginBottom: '16px', border: '1px solid #ddd', borderRadius: '8px', overflow: 'hidden', height: '600px'}}>
  <iframe 
    src="iframe.html?id=components-targetdirdialog-targetdirdialog--make-tab-multi-selected&viewMode=story" 
    style={{width: '100%', height: '100%', border: 'none', pointerEvents: 'none'}}
    title="生成タブ・複数エイリアス選択画面"
  />
</div>

### 2. エイリアスの設定方法を選ぶ

生成方法から「**連続発声**」を選びます。

この方法では、ガイドBGMのリズム情報を使って、1つのwavファイルから複数のエイリアスを自動的に切り出します。

### 3. 音源形式を選ぶ

作りたい音源の形式を選びます：

- **日本語単独音** - 1音1ファイルの基本形式
- **日本語連続音** - VCV形式の連続音
- **日本語CVVC** - より細かい制御が可能な形式

それぞれの形式に合わせて、エイリアスの命名規則や切り出し位置が自動的に設定されます。

> 💡 **上級者向け**: mkototemp.iniファイルを使うと、さらに細かくエイリアス設定をカスタマイズできます。
> この機能については、基本的な使い方に慣れてから挑戦することをおすすめします。

### 4. ガイドBGMの設定

「**設定詳細**」をクリックして、ガイドBGMの設定を展開します。

<div style={{marginTop: '16px', marginBottom: '16px', border: '1px solid #ddd', borderRadius: '8px', overflow: 'hidden', height: '600px'}}>
  <iframe 
    src="iframe.html?id=components-targetdirdialog-makepanelsettingsaccordion--expanded&viewMode=story" 
    style={{width: '100%', height: '100%', border: 'none', pointerEvents: 'none'}}
    title="設定詳細展開画面"
  />
</div>

ここで、録音時に使用したガイドBGMの設定を入力します。

#### 基本設定（3つの数値）

これらは必ず設定が必要な項目です：

- **ガイドBGMのbpm**: 録音時のガイドBGMのテンポ（例: 120）
- **wavの頭から1拍目までの長さ(ms)**: 録音開始から最初の音が始まるまでの時間（例: 1000ms = 1秒）
- **重複エイリアスの作成数**: 同じ音程の音をいくつ作るか（通常は2、無制限にする場合は0）

> 💡 **数値の確認方法**: ガイドBGMをダウンロードした場所に、これらの数値が記載されていることがあります。
> また、ガイドBGMと一緒に配布されているテキストファイル（readme.txtなど）や設定ファイル（mkototemp.iniなど）に
> 情報が書かれている場合もあるので、確認してみましょう。

#### 高度な設定

以下の項目は、必要に応じて調整します：

**チェックボックス項目:**
- **ファイル名途中のアンダーバーを1拍分の休符とみなす**: ファイル名の`_`を休符として扱う
- **wavの頭のエイリアスに-をつける**: 語頭音に`-`を付ける（例: `- あ`）
- **wavの頭のエイリアスを生成する**: 語頭音を自動生成する
- **連続音を生成する**: VCV形式の連続音を生成する
- **子音単体音を生成する**: 子音だけの音を生成する

**詳細設定（アコーディオン内）:**
- **母音**: 母音のエイリアスと種類の対応を設定
- **子音**: 子音のエイリアスと種類、平均長さを設定
- **ファイル名の置換**: ファイル名からエイリアスへの変換ルールを設定

> 💡 **初めての方へ**: まずは基本設定の3つの数値だけを入力し、他の項目はデフォルトのままで試してみましょう。
> 高度な設定は、基本的な使い方に慣れてから調整することをおすすめします。

> 📝 パラメータの詳しい意味については、**[3.原音設定とは](/docs/tutorial-ja-03-原音設定とは--docs)** を参照してください。

### 5. 「生成」で編集開始

設定が決まったら「**生成**」ボタンをタップします。
Laberuが自動的にoto.iniを作成して、編集画面に進みます。

## さらに詳細な設定

複数エイリアスに慣れてきたら、自動生成時のパラメータ初期値を細かく制御できます：

- **[8.自動生成の高度なカスタマイズ](/docs/tutorial-ja-08-自動生成の高度なカスタマイズ--docs)** - 自動生成時の各パラメータ初期値を指定

---

- 前のページ: [7-1.履歴から続きを始める](/docs/tutorial-ja-07-1-履歴から続きを始める--docs)
- 次のページ: [8.自動生成の高度なカスタマイズ](/docs/tutorial-ja-08-自動生成の高度なカスタマイズ--docs)
- エディタ画面の使い方: [9.エディタ画面の基本操作](/docs/tutorial-ja-09-エディタ画面の基本操作--docs)
